<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tur Detayı | TatilOtel</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Modern Styles -->
    <link rel="stylesheet" href="modern-core.css">
    <link rel="stylesheet" href="modern-components.css">

    <style>
        .tour-hero-wrap {
            background-color: white;
            padding: 1.5rem 0;
            border-bottom: 1px solid var(--clr-border);
        }

        .page-header-slim {
            background-color: #f8f9fa;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--clr-border);
        }

        .header-flex-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .breadcrumb-nav {
            font-size: 0.8rem;
            color: var(--clr-text-muted);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .breadcrumb-nav a:hover {
            color: var(--clr-primary);
        }

        .breadcrumb-nav i {
            font-size: 0.6rem;
            opacity: 0.5;
        }

        .results-stat {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--clr-text-muted);
        }

        .results-stat span {
            color: var(--clr-primary);
        }

        .tour-header-info {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .tour-main-img {
            width: 100%;
            height: 500px;
            object-fit: cover;
            border-radius: var(--radius-md);
            margin-top: 1rem;
        }

        .detail-page-grid {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 2rem;
            padding: var(--sp-md) 0;
        }

        .tab-menu {
            display: flex;
            gap: 2rem;
            border-bottom: 2px solid var(--clr-border);
            margin-bottom: 2rem;
        }

        .tab-item {
            padding: 1rem 0;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.9rem;
            cursor: pointer;
            position: relative;
        }

        .tab-item.active {
            color: var(--clr-primary);
        }

        .tab-item.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--clr-primary);
        }

        .itinerary-day {
            margin-bottom: 2.5rem;
        }

        .day-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .day-num {
            background: var(--clr-primary);
            color: white;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-weight: 800;
        }

        .booking-card {
            background: white;
            border: 2px solid var(--clr-primary);
            border-radius: var(--radius-md);
            padding: 2rem;
            position: sticky;
            top: calc(var(--header-height) + 2rem);
        }

        .booking-card h3 {
            margin-bottom: 1.5rem;
            font-size: 1.25rem;
        }

        .pax-select {
            margin-bottom: 1.5rem;
        }

        .total-price-box {
            background: #FEE2E2;
            padding: 1.5rem;
            border-radius: var(--radius-sm);
            margin-bottom: 1.5rem;
            text-align: center;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header-main">
        <div class="container" style="display: flex; align-items: center; width: 100%;">
            <a href="index.html" class="logo-wrap" style="text-decoration: none; color: inherit;">
                <span style="font-size: 1.5rem; font-weight: 800; color: var(--clr-primary);">TATIL</span><span
                    style="font-size: 1.5rem; font-weight: 400;">OTEL</span>
            </a>
            <nav class="nav-desktop" style="margin-right: auto;">
                <a href="index.html" class="nav-link">Anasayfa</a>
                <a href="tours.html?type=daily" class="nav-link">Günübirlik Turlar</a>
                <a href="tours.html?type=accommodation" class="nav-link">Konaklamalı Turlar</a>
                <a href="contact.html" class="nav-link">İletişim</a>
            </nav>
            <div class="header-right">
                <a href="tel:08505323773" class="phone-link"><i class="fa-solid fa-phone"></i> 0850 532 37 73</a>
                <button class="mobile-nav-toggle" id="menuOpen"><i class="fa-solid fa-bars"></i></button>
            </div>
        </div>
    </header>

    <!-- Side Menu -->
    <div class="side-menu-overlay" id="menuOverlay"></div>
    <div class="side-menu" id="sideMenu">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
            <a href="index.html" class="logo-wrap" style="text-decoration: none; color: inherit;">
                <span style="font-size: 1.3rem; font-weight: 800; color: var(--clr-primary);">TATIL</span><span
                    style="font-size: 1.3rem; font-weight: 400;">OTEL</span>
            </a>
            <button id="menuClose" style="background: none; border: none; font-size: 1.5rem;"><i
                    class="fa-solid fa-xmark"></i></button>
        </div>
        <a href="index.html" class="side-nav-link">Anasayfa</a>
        <a href="tours.html?type=daily" class="side-nav-link">Günübirlik Turlar</a>
        <a href="tours.html?type=accommodation" class="side-nav-link">Konaklamalı Turlar</a>
        <a href="contact.html" class="side-nav-link">İletişim</a>
        <a href="#" class="side-nav-link" style="color: var(--clr-primary);">Kampanyalar</a>
        <a href="tel:08505323773" class="side-nav-link" style="margin-top: auto; border: none;"><i
                class="fa-solid fa-phone"></i> 0850 532 37 73</a>
    </div>

    <div class="page-header-slim">
        <div class="container">
            <div class="header-flex-row">
                <nav class="breadcrumb-nav">
                    <a href="index.html">Anasayfa</a> <i class="fa-solid fa-chevron-right"></i>
                    <a href="tours.html">Turlar</a> <i class="fa-solid fa-chevron-right"></i>
                    <span id="bcCategory">Kategori</span> <i class="fa-solid fa-chevron-right"></i>
                    <span id="bcTitle" style="color: var(--clr-text); font-weight: 700;">Tur Adı</span>
                </nav>
                <div class="results-stat">
                    <span>TatilOtel</span> Güvencesiyle
                </div>
            </div>
        </div>
    </div>

    <div id="tourContent">
        <div class="tour-hero-wrap">
            <div class="container">
                <div class="tour-header-info">
                    <div>
                        <h1 class="font-heading" id="tourTitle">Tur Başlığı Yükleniyor...</h1>
                        <div
                            style="display: flex; gap: 1rem; margin-top: 0.5rem; font-size: 0.9rem; color: var(--clr-text-muted);">
                            <span id="tourDuration"><i class="fa-solid fa-clock"></i> --:--</span>
                            <span id="tourDays"><i class="fa-solid fa-calendar-days"></i> --</span>
                            <span id="tourLocation"><i class="fa-solid fa-location-dot"></i> --</span>
                        </div>
                    </div>
                    <div style="text-align: right;">
                        <span id="tourPriceSub" style="font-size: 0.8rem; color: var(--clr-text-muted);">En düşük
                            fiyat</span>
                        <div class="price-main" id="tourPriceMain">-- ₺</div>
                    </div>
                </div>

                <div class="main-img-relative">
                    <img src="" alt="Tur Görseli" class="tour-main-img" id="tourImg">
                    <div id="tourGallery"
                        style="display: flex; gap: 10px; margin-top: 10px; overflow-x: auto; padding-bottom: 10px;">
                        <!-- Gallery images will be injected here -->
                    </div>
                </div>
            </div>
        </div>

        <main class="container">
            <div class="detail-page-grid">
                <!-- Left Side -->
                <div>
                    <div class="tab-menu" id="tourTabs">
                        <div class="tab-item active" data-tab="info">Tur Hakkında</div>
                        <div class="tab-item" data-tab="included">Neler Dahil?</div>
                        <div class="tab-item" data-tab="notes">Notlar & Uyarılar</div>
                    </div>

                    <div id="tabContent_info" class="tab-pane active">
                        <div style="margin-bottom: 3rem;">
                            <h3 style="margin-bottom: 1.5rem;">Açıklama</h3>
                            <p id="tourDescription"
                                style="color: var(--clr-text-muted); line-height: 1.8; white-space: pre-wrap;">
                                İçerik yükleniyor...
                            </p>
                        </div>

                        <div id="tourHighlightsSection">
                            <h3 style="margin-bottom: 1.5rem;">Tur Öne Çıkanlar</h3>
                            <ul id="tourHighlights"
                                style="list-style: none; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                                <!-- Highlights injected here -->
                            </ul>
                        </div>
                    </div>

                    <div id="tabContent_included" class="tab-pane" style="display: none;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                            <div>
                                <h4 style="color: #059669; margin-bottom: 1rem;"><i
                                        class="fa-solid fa-circle-check"></i>
                                    Fiyata Dahil Olanlar</h4>
                                <ul id="tourIncluded" style="list-style: none; line-height: 2;">
                                    <!-- Inclusions injected here -->
                                </ul>
                            </div>
                            <div>
                                <h4 style="color: #DC2626; margin-bottom: 1rem;"><i
                                        class="fa-solid fa-circle-xmark"></i>
                                    Fiyata Dahil Olmayanlar</h4>
                                <ul id="tourExcluded" style="list-style: none; line-height: 2;">
                                    <!-- Exclusions injected here -->
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div id="tabContent_notes" class="tab-pane" style="display: none;">
                        <h4 style="margin-bottom: 1rem;">Önemli Bilgiler</h4>
                        <ul id="tourNotes"
                            style="color: var(--clr-text-muted); line-height: 1.8; padding-left: 1.2rem;">
                            <!-- Notes injected here -->
                        </ul>
                    </div>
                </div>

                <!-- Sidebar -->
                <aside>
                    <div class="booking-card">
                        <h3 class="font-heading">Rezervasyon Yap</h3>

                        <div class="pax-select">
                            <label
                                style="font-size: 0.8rem; font-weight: 700; display: block; margin-bottom: 0.5rem;">Yetişkin
                                Sayısı</label>
                            <select class="input-modern" id="paxAdult">
                                <option value="1">1 Yetişkin</option>
                                <option value="2" selected>2 Yetişkin</option>
                                <option value="3">3 Yetişkin</option>
                                <option value="4">4 Yetişkin</option>
                                <option value="5+">5+ Yetişkin</option>
                            </select>
                        </div>

                        <div class="pax-select">
                            <label
                                style="font-size: 0.8rem; font-weight: 700; display: block; margin-bottom: 0.5rem;">Çocuk
                                Sayısı</label>
                            <select class="input-modern" id="paxChild">
                                <option value="0">Çocuk Yok</option>
                                <option value="1">1 Çocuk</option>
                                <option value="2">2 Çocuk</option>
                            </select>
                        </div>

                        <div class="total-price-box">
                            <span style="font-size: 0.8rem; color: #B91C1C; font-weight: 700; display: block;">TAHMİNİ
                                TUTAR</span>
                            <div class="price-main" id="totalPrice" style="font-size: 2rem;">-- ₺</div>
                            <span id="paxSummary" style="font-size: 0.75rem; color: #B91C1C;">Lütfen yetişkin
                                seçiniz</span>
                        </div>

                        <button class="btn-red" style="width: 100%; height: 55px; font-size: 1.1rem;"
                            onclick="sendWhatsApp()">REZERVASYONU GÖNDER</button>

                        <div style="margin-top: 1.5rem; text-align: center;">
                            <p style="font-size: 0.7rem; color: var(--clr-text-muted); line-height: 1.4;">
                                Tıklayarak WhatsApp üzerinden hızlıca<br>bilgi alabilir veya yerinizi ayırtabilirsiniz.
                            </p>
                        </div>
                    </div>
                </aside>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <footer class="footer-simple">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col" style="grid-column: span 1;">
                    <a href="index.html" class="logo-wrap">
                        <img src="assets/logo.png" alt="TatilOtel" style="height: 30px;">
                    </a>
                    <p style="margin-top: 1.5rem; color: var(--clr-text-muted); font-size: 0.9rem;">
                        TatilOtel, en kaliteli tatil deneyimlerini en uygun fiyatlarla sunan lider turizm acentesidir.
                    </p>
                    <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                        <a href="#"><i class="fa-brands fa-instagram"></i></a>
                        <a href="#"><i class="fa-brands fa-facebook"></i></a>
                        <a href="#"><i class="fa-brands fa-twitter"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h4>Popüler Rotalar</h4>
                    <ul>
                        <li><a href="#">Balkan Turları</a></li>
                        <li><a href="#">Avrupa Turları</a></li>
                        <li><a href="#">Uzak Doğu</a></li>
                        <li><a href="#">Kültür Turları</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Kurumsal</h4>
                    <ul>
                        <li><a href="about.html">Hakkımızda</a></li>
                        <li><a href="contact.html">İletişim</a></li>
                        <li><a href="#">Gizlilik Politikası</a></li>
                        <li><a href="#">KVKK</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Müşteri Hizmetleri</h4>
                    <ul>
                        <li><a href="#">Yardım Merkezi</a></li>
                        <li><a href="#">İptal/İade Koşulları</a></li>
                        <li><a href="#">Ödeme Seçenekleri</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom-simple">
                <p>&copy; 2026 TatilOtel. Tüm hakları saklıdır.</p>
            </div>
        </div>
    </footer>

    <!-- Load Tour Data -->
    <script src="reference_tours_utf8.js"></script>

    <script>
        // Menu Toggle Logic
        const menuOpen = document.getElementById('menuOpen');
        const menuClose = document.getElementById('menuClose');
        const sideMenu = document.getElementById('sideMenu');
        const menuOverlay = document.getElementById('menuOverlay');

        function toggleMenu(show) {
            sideMenu.classList.toggle('active', show);
            menuOverlay.classList.toggle('active', show);
            document.body.style.overflow = show ? 'hidden' : '';
        }

        if (menuOpen) menuOpen.addEventListener('click', () => toggleMenu(true));
        if (menuClose) menuClose.addEventListener('click', () => toggleMenu(false));
        if (menuOverlay) menuOverlay.addEventListener('click', () => toggleMenu(false));

        // Tab Switching Logic
        const tabs = document.querySelectorAll('.tab-item');
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');

                const target = tab.getAttribute('data-tab');
                document.querySelectorAll('.tab-pane').forEach(pane => {
                    pane.style.display = 'none';
                });
                document.getElementById('tabContent_' + target).style.display = 'block';
            });
        });

        // Turkish Character Fixer in case data is still messy
        function fixTurkish(str) {
            if (!str) return "";
            return str
                .replace(/─ş/g, 'ğ')
                .replace(/─▒/g, 'ı')
                .replace(/├╝/g, 'ü')
                .replace(/├Â/g, 'ö')
                .replace(/├ğ/g, 'ç')
                .replace(/┼ş/g, 'ş')
                .replace(/─░/g, 'İ')
                .replace(/Ôé║/g, '₺')
                .replace(/ÔÇÖ/g, "'")
                .replace(/ÔÇô/g, "–");
        }

        /* Images will be loaded directly from local assets */

        // Load Content
        window.addEventListener('load', () => {
            const params = new URLSearchParams(window.location.search);
            const tourId = params.get('id');

            if (!tourId || !toursData) {
                document.getElementById('tourContent').innerHTML = '<div class="container" style="padding: 100px 0; text-align: center;"><h2>Tur Bulunamadı</h2><p>Lütfen farklı bir tur seçiniz.</p><a href="tours.html" class="btn-red" style="margin-top: 2rem;">Turlara Geri Dön</a></div>';
                return;
            }

            const tour = toursData.find(t => t.id === tourId);
            if (!tour) {
                document.getElementById('tourContent').innerHTML = '<div class="container" style="padding: 100px 0; text-align: center;"><h2>Geçersiz Tur ID</h2><p>Aradığınız tur sistemimizde bulunamadı.</p><a href="tours.html" class="btn-red" style="margin-top: 2rem;">Turlara Geri Dön</a></div>';
                return;
            }

            // Populate Text Fields
            document.title = fixTurkish(tour.title) + " | TatilOtel";
            document.getElementById('tourTitle').textContent = fixTurkish(tour.title);
            document.getElementById('tourLocation').innerHTML = `<i class="fa-solid fa-location-dot"></i> ${fixTurkish(tour.location)}`;
            document.getElementById('tourDuration').innerHTML = `<i class="fa-solid fa-clock"></i> ${fixTurkish(tour.duration)}`;
            document.getElementById('tourDays').innerHTML = `<i class="fa-solid fa-calendar-days"></i> ${fixTurkish(tour.days.join(', '))}`;
            document.getElementById('tourDescription').textContent = fixTurkish(tour.description);
            document.getElementById('tourPriceMain').textContent = tour.price.adult + " " + tour.price.currency;
            document.getElementById('bcCategory').textContent = fixTurkish(tour.category);
            document.getElementById('bcTitle').textContent = fixTurkish(tour.title);

            // Populate Images & Gallery
            const mainImgElement = document.getElementById('tourImg');
            const defaultImg = "https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?q=80&w=1920&auto=format&fit=crop";
            const firstImg = tour.images && tour.images.length > 0 ? tour.images[0] : defaultImg;
            mainImgElement.src = firstImg;

            const galleryContainer = document.getElementById('tourGallery');
            if (tour.images && tour.images.length > 0) {
                tour.images.forEach((img, index) => {
                    const imgThumb = document.createElement('img');
                    imgThumb.src = img;
                    imgThumb.style.width = "80px";
                    imgThumb.style.height = "60px";
                    imgThumb.style.objectFit = "cover";
                    imgThumb.style.borderRadius = "4px";
                    imgThumb.style.cursor = "pointer";
                    imgThumb.style.transition = "0.2s";
                    imgThumb.onclick = () => {
                        mainImgElement.src = img;
                        document.querySelectorAll('#tourGallery img').forEach(i => i.style.border = 'none');
                        imgThumb.style.border = '2px solid var(--clr-primary)';
                    };
                    galleryContainer.appendChild(imgThumb);
                    if (index === 0) {
                        imgThumb.style.border = '2px solid var(--clr-primary)';
                    }
                });
            }

            // Highlights
            const hlContainer = document.getElementById('tourHighlights');
            if (tour.highlights && tour.highlights.length > 0) {
                tour.highlights.forEach(hl => {
                    const li = document.createElement('li');
                    li.style.padding = "0.5rem 0";
                    li.innerHTML = `<i class="fa-solid fa-check" style="color: var(--clr-primary); margin-right: 10px;"></i> ${fixTurkish(hl)}`;
                    hlContainer.appendChild(li);
                });
            } else {
                document.getElementById('tourHighlightsSection').style.display = 'none';
            }

            // Included / Excluded
            const incContainer = document.getElementById('tourIncluded');
            tour.included.forEach(item => {
                const li = document.createElement('li');
                li.innerHTML = `<i class="fa-solid fa-plus-circle" style="color: #059669; margin-right: 10px; font-size: 0.8rem;"></i> ${fixTurkish(item)}`;
                incContainer.appendChild(li);
            });

            const excContainer = document.getElementById('tourExcluded');
            tour.excluded.forEach(item => {
                const li = document.createElement('li');
                li.innerHTML = `<i class="fa-solid fa-minus-circle" style="color: #DC2626; margin-right: 10px; font-size: 0.8rem;"></i> ${fixTurkish(item)}`;
                excContainer.appendChild(li);
            });

            // Notes
            const noteContainer = document.getElementById('tourNotes');
            tour.notes.forEach(note => {
                const li = document.createElement('li');
                li.style.marginBottom = "0.5rem";
                li.textContent = fixTurkish(note);
                noteContainer.appendChild(li);
            });

            // Booking Calculation Logic
            const paxAdult = document.getElementById('paxAdult');
            const paxChild = document.getElementById('paxChild');
            const totalPrice = document.getElementById('totalPrice');

            function updatePrice() {
                const adults = parseInt(paxAdult.value) || 0;
                const children = parseInt(paxChild.value) || 0;
                const total = (adults * tour.price.adult) + (children * (tour.price.child || 0));
                totalPrice.textContent = total + " " + tour.price.currency;
                document.getElementById('paxSummary').textContent = `(${adults} Yetişkin ${children > 0 ? '+ ' + children + ' Çocuk' : ''})`;
            }

            paxAdult.addEventListener('change', updatePrice);
            paxChild.addEventListener('change', updatePrice);
            updatePrice();
        });

        function sendWhatsApp() {
            const title = document.getElementById('tourTitle').textContent;
            const adults = document.getElementById('paxAdult').value;
            const children = document.getElementById('paxChild').value;
            const price = document.getElementById('totalPrice').textContent;

            const text = `Merhaba, ${title} turu için bilgi almak istiyorum.\n\nKişi Sayısı: ${adults} Yetişkin, ${children} Çocuk\nTahmini Tutar: ${price}\n\nYer durumu hakkında dönüş yapabilir misiniz?`;
            const encodedText = encodeURIComponent(text);
            window.open(`https://wa.me/908505323773?text=${encodedText}`, '_blank');
        }
    </script>
</body>

</html>

</html>